# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å MySQL.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- MySQL Server 8.0+ –∏–ª–∏ MariaDB 10.4+
- Node.js 18+
- –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MySQL

#### Windows:
```bash
# –°–∫–∞—á–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞: https://dev.mysql.com/downloads/mysql/
# –ò–ª–∏ —á–µ—Ä–µ–∑ Chocolatey:
choco install mysql
```

#### macOS:
```bash
# –ß–µ—Ä–µ–∑ Homebrew:
brew install mysql
brew services start mysql
```

#### Linux (Ubuntu/Debian):
```bash
sudo apt update
sudo apt install mysql-server
sudo systemctl start mysql
sudo systemctl enable mysql
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í–æ–π–¥–∏—Ç–µ –≤ MySQL –∫–æ–Ω—Å–æ–ª—å:
```bash
mysql -u root -p
```

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
```sql
CREATE DATABASE faction_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'faction_user'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON faction_system.* TO 'faction_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç:
```bash
mysql -u faction_user -p faction_system < src/database/schema.sql
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=faction_user
DB_PASSWORD=your_secure_password
DB_NAME=faction_system
VITE_USE_MOCK_DATA=false
```

### 5. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –º–∞—Å—Ç–µ—Ä: –ª–æ–≥–∏–Ω `master`, –ø–∞—Ä–æ–ª—å `master2024!`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ê–¥–º–∏–Ω** ‚Üí **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**
4. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MySQL"**
5. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞–∂–º–∏—Ç–µ **"–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ"**

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- **`users`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- **`factions`** - –§—Ä–∞–∫—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
- **`faction_members`** - –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ñ—Ä–∞–∫—Ü–∏–π
- **`warnings`** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞–º
- **`notifications`** - –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **`activity_logs`** - –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **`admin_actions`** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- **`user_sessions`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏

### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

1. **–ú–∞—Å—Ç–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
   - –õ–æ–≥–∏–Ω: `master`
   - –ü–∞—Ä–æ–ª—å: `master2024!`
   - –†–æ–ª—å: `super_admin`
   - –ü—Ä–∞–≤–∞: –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ

2. **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å:**
   - –õ–æ–≥–∏–Ω: `observer_guest`
   - –ü–∞—Ä–æ–ª—å: *(–ø—É—Å—Ç–æ–π)*
   - –†–æ–ª—å: `observer`
   - –ü—Ä–∞–≤–∞: `read`, `manage_activity_status`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** –ø–æ IP
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

–í `.env` –¥–æ–±–∞–≤—å—Ç–µ:
```env
DB_SSL=true
DB_SSL_CA=/path/to/ca-cert.pem
DB_SSL_KEY=/path/to/client-key.pem
DB_SSL_CERT=/path/to/client-cert.pem
```

## üìä –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ mock-–¥–∞–Ω–Ω—ã–µ –≤ MySQL –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

### –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:

```javascript
import { dataService } from '@/services/DataService'

// –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ MySQL
await dataService.switchToDatabase()

// –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
await dataService.migrate()
```

## üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
mysqldump -u faction_user -p faction_system > backup_$(date +%Y%m%d_%H%M%S).sql
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
mysql -u faction_user -p faction_system < backup_20240804_120000.sql
```

### –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π):

```sql
DELETE FROM activity_logs WHERE created_at < DATE_SUB(NOW(), INTERVAL 30 DAY);
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å MySQL: `systemctl status mysql`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `netstat -tlnp | grep :3306`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MySQL
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞

### –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
```sql
GRANT ALL PRIVILEGES ON faction_system.* TO 'faction_user'@'localhost';
FLUSH PRIVILEGES;
```

### –û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:
```sql
ALTER DATABASE faction_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## üì± –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö"** —Å:
- –°—Ç–∞—Ç—É—Å–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- –ö–Ω–æ–ø–∫–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

**üöÄ –ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤ MySQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.